<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Jm Acessórios de Luxo</title>

    <link rel="stylesheet" href="/css/main.css">
    <link href="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/dd47628d23.js" crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

</head>

<body>
    <script src="/jquery.mask.js"></script>

    <header>

    </header>

    <form id="buyerForm">
    
        <div class="form" >
            <span class="formHeader">Dados Pessoais</span>
            <input id="DataNome" name="nome" type="text" placeholder="Nome" maxlength="50" required>
            <input id="DataSobrenome" name="sobrenome" type="text" placeholder="Sobrenome" maxlength="50" required>
            <input id="DataEmail" name="email" type="email" placeholder="e-mail" maxlength="120" required>
            <input id="DataTelefone" name="telefone" type="text" placeholder="Telefone" required>
            <input id="DataCPF" name="cpf" type="text" placeholder="CPF" required>
            <input id="DataNascimento" name="nascimento" type="text" placeholder="Data de Nascimento" required>
        </div>


        <div class="form" >
            <span class="formHeader">Dados de Envio</span>
            <input id="ShippingCEP" type="text" placeholder="CEP" required name="cep">
            <input id="ShippingRua" type="text" placeholder="Rua" name="rua">
            <input id="ShippingNumero" type="text" placeholder="Número" required name="numero">
            <input id="ShippingBairro" type="text" placeholder="Bairro" name="bairro">
            <input id="ShippingCidade" type="text" placeholder="Cidade" name="cidade">
            <input id="ShippingUF" type="text" placeholder="UF" name="UF">
            <input id="ShippingComplemento" type="text" placeholder="Complemento" maxlength="100" name="complemento">
        </div>
        <button class="formContinue">Continuar</button>
    </form>

    <footer>

    </footer>
    <script>
        
        
  $('form').submit(false);
        $("header").load("/includes/header.html");
        $("footer").load("/includes/footer.html");

        $('#DataTelefone').mask('(00) 0.0000-0000');
        $('#DataCPF').mask('000.000.000-00');
        $('#DataNascimento').mask('00/00/0000');
        $('#ShippingCEP').mask('00.000-000');
        $('#ShippingNumero').mask('00000');

        $(document).ready(() => {
            $("#ShippingCEP").on('keyup', () => {
                if ($("#ShippingCEP").val().length == 10) {
                    var cep = $("#ShippingCEP").val();
                    $.ajax({
                        url: "http://viacep.com.br/ws/" + ((cep).replace('.', '').replace('-', '')) + "/json/",
                        type: "GET",
                        crossDomain: true,
                        dataType: "json",
                        mode: 'no-cors'
                    }).done((data) => {
                        //console.log(data)
                        $('#ShippingBairro').val(data['bairro'])
                        $('#ShippingCidade').val(data['localidade'])
                        $('#ShippingRua').val(data['logradouro'])
                        $('#ShippingUF').val(data['uf'])
                    })
                }
            })


            var receiverData = {
                nome: $("#DataNome").val(),
                sobrenome: $("#DataSobrenome").val(),
                email: $("#DataEmail").val(),
                phone: $("#DataTelefone").val(),
                cpf: $("#DataCPF").val(),
                nascimento: $("#DataNascimento").val(),
                cep: $("#ShippingCEP").val(),
                rua: $("#ShippingRua").val(),
                numero: $("#ShippingNumero").val(),
                bairro: $("#ShippingBairro").val(),
                cidade: $("#ShippingCidade").val(),
                uf: $("#ShippingUF").val(),
                complemento: $("#ShippingComplemento").val()
            }
            $(".formContinue").on("click", () => {
                var query = $("#buyerForm").serialize();
                console.log(query);
                //redirect to /checkout+query
                window.location.href = "/checkout/?" + query;
            })

        })

    </script>

</body>

</html>